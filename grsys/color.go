// Graphics primitives.
package grsys

import (
	"fmt"
	"image/color"
	"os"
)

func SetColor(c int) {
	ForeGrColor = c
}

func SetBackgroundColor(c int) {
	BackGrColor = c
}

func GetMaxColor() int {
	return 255
}

func SetRGBPalette(index, r, g, b int) {
	palette[index] = color.RGBA{
		R: uint8(r * 4),
		G: uint8(g * 4),
		B: uint8(b * 4),
		A: 255,
	}
}

func ShadedColors() {
	f, err := os.Open("palette.txt")
	if err == nil {
		for i := 0; i < NColors; i++ {
			var r, g, b int
			if _, err := fmt.Fscanln(f, &r, &g, &b); err != nil {
				Error(err)
			}
			SetRGBPalette(i, r, g, b)
		}
	} else {
		SetRGBPalette(0, 0, 0, 63) // blue background
		for i := 1; i < NColors; i++ {
			j := 4*i + 3
			SetRGBPalette(i, j, j, 0) // shades of yellow
		}
	}
}

// Default values for the VGA.
var defaultPalette = color.Palette{
	color.RGBA{R: 0, G: 0, B: 0, A: 255},
	color.RGBA{R: 0, G: 0, B: 168, A: 255},
	color.RGBA{R: 0, G: 168, B: 0, A: 255},
	color.RGBA{R: 0, G: 168, B: 168, A: 255},
	color.RGBA{R: 168, G: 0, B: 0, A: 255},
	color.RGBA{R: 168, G: 0, B: 168, A: 255},
	color.RGBA{R: 168, G: 84, B: 0, A: 255},
	color.RGBA{R: 168, G: 168, B: 168, A: 255},
	color.RGBA{R: 84, G: 84, B: 84, A: 255},
	color.RGBA{R: 84, G: 84, B: 252, A: 255},
	color.RGBA{R: 84, G: 252, B: 84, A: 255},
	color.RGBA{R: 84, G: 252, B: 252, A: 255},
	color.RGBA{R: 252, G: 84, B: 84, A: 255},
	color.RGBA{R: 252, G: 84, B: 252, A: 255},
	color.RGBA{R: 252, G: 252, B: 84, A: 255},
	color.RGBA{R: 252, G: 252, B: 252, A: 255},
	color.RGBA{R: 0, G: 0, B: 0, A: 255},
	color.RGBA{R: 20, G: 20, B: 20, A: 255},
	color.RGBA{R: 32, G: 32, B: 32, A: 255},
	color.RGBA{R: 44, G: 44, B: 44, A: 255},
	color.RGBA{R: 56, G: 56, B: 56, A: 255},
	color.RGBA{R: 68, G: 68, B: 68, A: 255},
	color.RGBA{R: 80, G: 80, B: 80, A: 255},
	color.RGBA{R: 96, G: 96, B: 96, A: 255},
	color.RGBA{R: 112, G: 112, B: 112, A: 255},
	color.RGBA{R: 128, G: 128, B: 128, A: 255},
	color.RGBA{R: 144, G: 144, B: 144, A: 255},
	color.RGBA{R: 160, G: 160, B: 160, A: 255},
	color.RGBA{R: 180, G: 180, B: 180, A: 255},
	color.RGBA{R: 200, G: 200, B: 200, A: 255},
	color.RGBA{R: 224, G: 224, B: 224, A: 255},
	color.RGBA{R: 252, G: 252, B: 252, A: 255},
	color.RGBA{R: 0, G: 0, B: 252, A: 255},
	color.RGBA{R: 64, G: 0, B: 252, A: 255},
	color.RGBA{R: 124, G: 0, B: 252, A: 255},
	color.RGBA{R: 188, G: 0, B: 252, A: 255},
	color.RGBA{R: 252, G: 0, B: 252, A: 255},
	color.RGBA{R: 252, G: 0, B: 188, A: 255},
	color.RGBA{R: 252, G: 0, B: 124, A: 255},
	color.RGBA{R: 252, G: 0, B: 64, A: 255},
	color.RGBA{R: 252, G: 0, B: 0, A: 255},
	color.RGBA{R: 252, G: 64, B: 0, A: 255},
	color.RGBA{R: 252, G: 124, B: 0, A: 255},
	color.RGBA{R: 252, G: 188, B: 0, A: 255},
	color.RGBA{R: 252, G: 252, B: 0, A: 255},
	color.RGBA{R: 188, G: 252, B: 0, A: 255},
	color.RGBA{R: 124, G: 252, B: 0, A: 255},
	color.RGBA{R: 64, G: 252, B: 0, A: 255},
	color.RGBA{R: 0, G: 252, B: 0, A: 255},
	color.RGBA{R: 0, G: 252, B: 64, A: 255},
	color.RGBA{R: 0, G: 252, B: 124, A: 255},
	color.RGBA{R: 0, G: 252, B: 188, A: 255},
	color.RGBA{R: 0, G: 252, B: 252, A: 255},
	color.RGBA{R: 0, G: 188, B: 252, A: 255},
	color.RGBA{R: 0, G: 124, B: 252, A: 255},
	color.RGBA{R: 0, G: 64, B: 252, A: 255},
	color.RGBA{R: 124, G: 124, B: 252, A: 255},
	color.RGBA{R: 156, G: 124, B: 252, A: 255},
	color.RGBA{R: 188, G: 124, B: 252, A: 255},
	color.RGBA{R: 220, G: 124, B: 252, A: 255},
	color.RGBA{R: 252, G: 124, B: 252, A: 255},
	color.RGBA{R: 252, G: 124, B: 220, A: 255},
	color.RGBA{R: 252, G: 124, B: 188, A: 255},
	color.RGBA{R: 252, G: 124, B: 156, A: 255},
	color.RGBA{R: 252, G: 124, B: 124, A: 255},
	color.RGBA{R: 252, G: 156, B: 124, A: 255},
	color.RGBA{R: 252, G: 188, B: 124, A: 255},
	color.RGBA{R: 252, G: 220, B: 124, A: 255},
	color.RGBA{R: 252, G: 252, B: 124, A: 255},
	color.RGBA{R: 220, G: 252, B: 124, A: 255},
	color.RGBA{R: 188, G: 252, B: 124, A: 255},
	color.RGBA{R: 156, G: 252, B: 124, A: 255},
	color.RGBA{R: 124, G: 252, B: 124, A: 255},
	color.RGBA{R: 124, G: 252, B: 156, A: 255},
	color.RGBA{R: 124, G: 252, B: 188, A: 255},
	color.RGBA{R: 124, G: 252, B: 220, A: 255},
	color.RGBA{R: 124, G: 252, B: 252, A: 255},
	color.RGBA{R: 124, G: 220, B: 252, A: 255},
	color.RGBA{R: 124, G: 188, B: 252, A: 255},
	color.RGBA{R: 124, G: 156, B: 252, A: 255},
	color.RGBA{R: 180, G: 180, B: 252, A: 255},
	color.RGBA{R: 196, G: 180, B: 252, A: 255},
	color.RGBA{R: 216, G: 180, B: 252, A: 255},
	color.RGBA{R: 232, G: 180, B: 252, A: 255},
	color.RGBA{R: 252, G: 180, B: 252, A: 255},
	color.RGBA{R: 252, G: 180, B: 232, A: 255},
	color.RGBA{R: 252, G: 180, B: 216, A: 255},
	color.RGBA{R: 252, G: 180, B: 196, A: 255},
	color.RGBA{R: 252, G: 180, B: 180, A: 255},
	color.RGBA{R: 252, G: 196, B: 180, A: 255},
	color.RGBA{R: 252, G: 216, B: 180, A: 255},
	color.RGBA{R: 252, G: 232, B: 180, A: 255},
	color.RGBA{R: 252, G: 252, B: 180, A: 255},
	color.RGBA{R: 232, G: 252, B: 180, A: 255},
	color.RGBA{R: 216, G: 252, B: 180, A: 255},
	color.RGBA{R: 196, G: 252, B: 180, A: 255},
	color.RGBA{R: 180, G: 252, B: 180, A: 255},
	color.RGBA{R: 180, G: 252, B: 196, A: 255},
	color.RGBA{R: 180, G: 252, B: 216, A: 255},
	color.RGBA{R: 180, G: 252, B: 232, A: 255},
	color.RGBA{R: 180, G: 252, B: 252, A: 255},
	color.RGBA{R: 180, G: 232, B: 252, A: 255},
	color.RGBA{R: 180, G: 216, B: 252, A: 255},
	color.RGBA{R: 180, G: 196, B: 252, A: 255},
	color.RGBA{R: 0, G: 0, B: 112, A: 255},
	color.RGBA{R: 28, G: 0, B: 112, A: 255},
	color.RGBA{R: 56, G: 0, B: 112, A: 255},
	color.RGBA{R: 84, G: 0, B: 112, A: 255},
	color.RGBA{R: 112, G: 0, B: 112, A: 255},
	color.RGBA{R: 112, G: 0, B: 84, A: 255},
	color.RGBA{R: 112, G: 0, B: 56, A: 255},
	color.RGBA{R: 112, G: 0, B: 28, A: 255},
	color.RGBA{R: 112, G: 0, B: 0, A: 255},
	color.RGBA{R: 112, G: 28, B: 0, A: 255},
	color.RGBA{R: 112, G: 56, B: 0, A: 255},
	color.RGBA{R: 112, G: 84, B: 0, A: 255},
	color.RGBA{R: 112, G: 112, B: 0, A: 255},
	color.RGBA{R: 84, G: 112, B: 0, A: 255},
	color.RGBA{R: 56, G: 112, B: 0, A: 255},
	color.RGBA{R: 28, G: 112, B: 0, A: 255},
	color.RGBA{R: 0, G: 112, B: 0, A: 255},
	color.RGBA{R: 0, G: 112, B: 28, A: 255},
	color.RGBA{R: 0, G: 112, B: 56, A: 255},
	color.RGBA{R: 0, G: 112, B: 84, A: 255},
	color.RGBA{R: 0, G: 112, B: 112, A: 255},
	color.RGBA{R: 0, G: 84, B: 112, A: 255},
	color.RGBA{R: 0, G: 56, B: 112, A: 255},
	color.RGBA{R: 0, G: 28, B: 112, A: 255},
	color.RGBA{R: 56, G: 56, B: 112, A: 255},
	color.RGBA{R: 68, G: 56, B: 112, A: 255},
	color.RGBA{R: 84, G: 56, B: 112, A: 255},
	color.RGBA{R: 96, G: 56, B: 112, A: 255},
	color.RGBA{R: 112, G: 56, B: 112, A: 255},
	color.RGBA{R: 112, G: 56, B: 96, A: 255},
	color.RGBA{R: 112, G: 56, B: 84, A: 255},
	color.RGBA{R: 112, G: 56, B: 68, A: 255},
	color.RGBA{R: 112, G: 56, B: 56, A: 255},
	color.RGBA{R: 112, G: 68, B: 56, A: 255},
	color.RGBA{R: 112, G: 84, B: 56, A: 255},
	color.RGBA{R: 112, G: 96, B: 56, A: 255},
	color.RGBA{R: 112, G: 112, B: 56, A: 255},
	color.RGBA{R: 96, G: 112, B: 56, A: 255},
	color.RGBA{R: 84, G: 112, B: 56, A: 255},
	color.RGBA{R: 68, G: 112, B: 56, A: 255},
	color.RGBA{R: 56, G: 112, B: 56, A: 255},
	color.RGBA{R: 56, G: 112, B: 68, A: 255},
	color.RGBA{R: 56, G: 112, B: 84, A: 255},
	color.RGBA{R: 56, G: 112, B: 96, A: 255},
	color.RGBA{R: 56, G: 112, B: 112, A: 255},
	color.RGBA{R: 56, G: 96, B: 112, A: 255},
	color.RGBA{R: 56, G: 84, B: 112, A: 255},
	color.RGBA{R: 56, G: 68, B: 112, A: 255},
	color.RGBA{R: 80, G: 80, B: 112, A: 255},
	color.RGBA{R: 88, G: 80, B: 112, A: 255},
	color.RGBA{R: 96, G: 80, B: 112, A: 255},
	color.RGBA{R: 104, G: 80, B: 112, A: 255},
	color.RGBA{R: 112, G: 80, B: 112, A: 255},
	color.RGBA{R: 112, G: 80, B: 104, A: 255},
	color.RGBA{R: 112, G: 80, B: 96, A: 255},
	color.RGBA{R: 112, G: 80, B: 88, A: 255},
	color.RGBA{R: 112, G: 80, B: 80, A: 255},
	color.RGBA{R: 112, G: 88, B: 80, A: 255},
	color.RGBA{R: 112, G: 96, B: 80, A: 255},
	color.RGBA{R: 112, G: 104, B: 80, A: 255},
	color.RGBA{R: 112, G: 112, B: 80, A: 255},
	color.RGBA{R: 104, G: 112, B: 80, A: 255},
	color.RGBA{R: 96, G: 112, B: 80, A: 255},
	color.RGBA{R: 88, G: 112, B: 80, A: 255},
	color.RGBA{R: 80, G: 112, B: 80, A: 255},
	color.RGBA{R: 80, G: 112, B: 88, A: 255},
	color.RGBA{R: 80, G: 112, B: 96, A: 255},
	color.RGBA{R: 80, G: 112, B: 104, A: 255},
	color.RGBA{R: 80, G: 112, B: 112, A: 255},
	color.RGBA{R: 80, G: 104, B: 112, A: 255},
	color.RGBA{R: 80, G: 96, B: 112, A: 255},
	color.RGBA{R: 80, G: 88, B: 112, A: 255},
	color.RGBA{R: 0, G: 0, B: 64, A: 255},
	color.RGBA{R: 16, G: 0, B: 64, A: 255},
	color.RGBA{R: 32, G: 0, B: 64, A: 255},
	color.RGBA{R: 48, G: 0, B: 64, A: 255},
	color.RGBA{R: 64, G: 0, B: 64, A: 255},
	color.RGBA{R: 64, G: 0, B: 48, A: 255},
	color.RGBA{R: 64, G: 0, B: 32, A: 255},
	color.RGBA{R: 64, G: 0, B: 16, A: 255},
	color.RGBA{R: 64, G: 0, B: 0, A: 255},
	color.RGBA{R: 64, G: 16, B: 0, A: 255},
	color.RGBA{R: 64, G: 32, B: 0, A: 255},
	color.RGBA{R: 64, G: 48, B: 0, A: 255},
	color.RGBA{R: 64, G: 64, B: 0, A: 255},
	color.RGBA{R: 48, G: 64, B: 0, A: 255},
	color.RGBA{R: 32, G: 64, B: 0, A: 255},
	color.RGBA{R: 16, G: 64, B: 0, A: 255},
	color.RGBA{R: 0, G: 64, B: 0, A: 255},
	color.RGBA{R: 0, G: 64, B: 16, A: 255},
	color.RGBA{R: 0, G: 64, B: 32, A: 255},
	color.RGBA{R: 0, G: 64, B: 48, A: 255},
	color.RGBA{R: 0, G: 64, B: 64, A: 255},
	color.RGBA{R: 0, G: 48, B: 64, A: 255},
	color.RGBA{R: 0, G: 32, B: 64, A: 255},
	color.RGBA{R: 0, G: 16, B: 64, A: 255},
	color.RGBA{R: 32, G: 32, B: 64, A: 255},
	color.RGBA{R: 40, G: 32, B: 64, A: 255},
	color.RGBA{R: 48, G: 32, B: 64, A: 255},
	color.RGBA{R: 56, G: 32, B: 64, A: 255},
	color.RGBA{R: 64, G: 32, B: 64, A: 255},
	color.RGBA{R: 64, G: 32, B: 56, A: 255},
	color.RGBA{R: 64, G: 32, B: 48, A: 255},
	color.RGBA{R: 64, G: 32, B: 40, A: 255},
	color.RGBA{R: 64, G: 32, B: 32, A: 255},
	color.RGBA{R: 64, G: 40, B: 32, A: 255},
	color.RGBA{R: 64, G: 48, B: 32, A: 255},
	color.RGBA{R: 64, G: 56, B: 32, A: 255},
	color.RGBA{R: 64, G: 64, B: 32, A: 255},
	color.RGBA{R: 56, G: 64, B: 32, A: 255},
	color.RGBA{R: 48, G: 64, B: 32, A: 255},
	color.RGBA{R: 40, G: 64, B: 32, A: 255},
	color.RGBA{R: 32, G: 64, B: 32, A: 255},
	color.RGBA{R: 32, G: 64, B: 40, A: 255},
	color.RGBA{R: 32, G: 64, B: 48, A: 255},
	color.RGBA{R: 32, G: 64, B: 56, A: 255},
	color.RGBA{R: 32, G: 64, B: 64, A: 255},
	color.RGBA{R: 32, G: 56, B: 64, A: 255},
	color.RGBA{R: 32, G: 48, B: 64, A: 255},
	color.RGBA{R: 32, G: 40, B: 64, A: 255},
	color.RGBA{R: 44, G: 44, B: 64, A: 255},
	color.RGBA{R: 48, G: 44, B: 64, A: 255},
	color.RGBA{R: 52, G: 44, B: 64, A: 255},
	color.RGBA{R: 60, G: 44, B: 64, A: 255},
	color.RGBA{R: 64, G: 44, B: 64, A: 255},
	color.RGBA{R: 64, G: 44, B: 60, A: 255},
	color.RGBA{R: 64, G: 44, B: 52, A: 255},
	color.RGBA{R: 64, G: 44, B: 48, A: 255},
	color.RGBA{R: 64, G: 44, B: 44, A: 255},
	color.RGBA{R: 64, G: 48, B: 44, A: 255},
	color.RGBA{R: 64, G: 52, B: 44, A: 255},
	color.RGBA{R: 64, G: 60, B: 44, A: 255},
	color.RGBA{R: 64, G: 64, B: 44, A: 255},
	color.RGBA{R: 60, G: 64, B: 44, A: 255},
	color.RGBA{R: 52, G: 64, B: 44, A: 255},
	color.RGBA{R: 48, G: 64, B: 44, A: 255},
	color.RGBA{R: 44, G: 64, B: 44, A: 255},
	color.RGBA{R: 44, G: 64, B: 48, A: 255},
	color.RGBA{R: 44, G: 64, B: 52, A: 255},
	color.RGBA{R: 44, G: 64, B: 60, A: 255},
	color.RGBA{R: 44, G: 64, B: 64, A: 255},
	color.RGBA{R: 44, G: 60, B: 64, A: 255},
	color.RGBA{R: 44, G: 52, B: 64, A: 255},
	color.RGBA{R: 44, G: 48, B: 64, A: 255},
	color.RGBA{R: 0, G: 0, B: 0, A: 255},
	color.RGBA{R: 0, G: 0, B: 0, A: 255},
	color.RGBA{R: 0, G: 0, B: 0, A: 255},
	color.RGBA{R: 0, G: 0, B: 0, A: 255},
	color.RGBA{R: 0, G: 0, B: 0, A: 255},
	color.RGBA{R: 0, G: 0, B: 0, A: 255},
	color.RGBA{R: 0, G: 0, B: 0, A: 255},
	color.RGBA{R: 0, G: 0, B: 0, A: 255},
}
